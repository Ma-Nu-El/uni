#+TITLE: Regresión
#+INCLUDE: "~/org/config-spanish.org"

* Scripts usados

- SCRIPT_A01_4_descripY.R
- SCRIPT P01 Analisis de Distribucion.r
- SCRIPT P02 Analisis de Distribucion.r
- SCRIPT REGRESION MULTIPLE.r

* Correlación
** Correlación y calidad del modelo
:PROPERTIES:
:ID:       77f78879-51fa-4196-bdf0-15d43876b0a1
:END:

Una correlación = |1| /no/ es existe.
- Siempre hay errores.


- R<|0.2-0.3| \iff no hay relación.
- |0.4|<R<|0.6| \iff relación baja.
- |0.6|<R<|0.8| \iff relación media.
- |0.8|<R<|1.0| \iff relación alta.


- Profe Carlos trabaja con R>|0.7|.

** Coeficiente de correlación (aka R o r)
- es el nivel de relación existente entre
  2 variables; se entiende como el porcentaje
  de datos que poseen una asociación
  directa o inversa.
- Interpretación:
  - "De cada 100 pares de datos, R*100 tienen el
    mismo comportamiento".

* Construcción y calidad del modelo
- Un modelo bien construido procura cumplir la
  mayor cantidad de [[id:806ba6ae-fb8c-47cb-9635-8433a4b40d80][supuestos]]. Un mal modelo
  no cumple con muchos supuestos.
- Un modelo bueno tiene una alta [[id:77f78879-51fa-4196-bdf0-15d43876b0a1][correlación]].


A partir de esto se pueden tener 4 tipos de
modelos:
- Modelos buenos bien construidos.
- Modelos buenos mal construidos.
- Modelos malos bien construidos.
- Modelos malos mal construidos.

* Supuestos para la realización de un modelo RLM (RLS)
:PROPERTIES:
:ID:       806ba6ae-fb8c-47cb-9635-8433a4b40d80
:END:
- u es el error.


1. E(u)=\bar u = 0.
2. V(u) es mínima.
3. u \sim N(0,\sigma^{2}_{u})
4. Los u's son independientes.
5. No auto-correlación.
6. Homocedasticidad.
   - Cedasticidad=dispersión.
7. No multicolinealidad.
   - Si no es cero, entonces tengo variables
     que están en función de otras variables.

* Condición de cálculo
- n: tamaño de la muestra.
- k: número de parámetros.


- n > k

* Chart
- 1 estrella
  - sig > 0.01?
- 2 estrellas
  - sig > 0.01?
- 3 estrellas
  - sig > 0.05?
* Simulaciones
- phet
  - [[https://phet.colorado.edu/sims/html/curve-fitting/latest/curve-fitting_en.html][Curve Fitting]]
* Script de la clase
** [2022-06-14 Tue]
- datos<-PSU_diagnostico_01

#+begin_example R
source ("~/Downloads/uni/2022-1/proba/scripts-r/SCRIPT_A01_4_descripY.R")
source ("~/Downloads/uni/2022-1/proba/scripts-r/SCRIPT REGRESION MULTIPLE.r")

# eliminamos los que no rindieron la prueba
datos<-datos[datos$rend1>0,]

# Analisis supuesto colinealidad
chart.Correlation(datos)
# se recomienda identificar la variable sensible: "la que
# no tengo que tocar"

# elimino las variables colineales
datos<-dplyr::select(PSU_diagnostico_01,-PEM,-HIST,-PROMPSU,-PSUPOND,-LENG,-CS)
# tienen que estar en el mismo orden

model01<-lm(datos$rend1~.,data=datos)
vif(model01) # el output: ojala 1, o lo mas cercano a 1
summary(model01)

# Analisis supuestos
# S1
# mean(model01$residuals)

# S2
# S3 errores se comportan normal
# HO: los datos se comportan normal
# shapiro.test(model01$residuals)

# S4 errores independientes
# plot(model01$residuals)

# S5 no autocorrelacion
# HO: no existe autocorrelacion
# Test DurbinWatson
# dwtest(model01)

# S6 Homocedasticidad
# HO: varianzas iguales
# test BreuschPagan
# bptest(model01)

# S7 No multicolinealidad
# HO: no hay variables colineales
#+end_example

** [2022-06-17 Fri]
* Método de Mínimos Cuadrados Ordinarios(MMCO)
- Relación con varianza y el supuesto 2?
* Notas de la clase
** [2022-06-17 Fri]
*** Independencia de errores
- [2022-06-17 Fri 09:25]
- Contexto: supuesto 4: independencia de
  los errores.


- Aumenta el Ingreso \implies Aumenta el gasto.



- Si el procedimiento de muestreo se hizo correctamente,
  entonces no debería haber relación entre los
  errores, por lo que cualquier supuesto patrón
  existente seria una relación espurica.
- Cuando existen pocos datos, es fácil encontrar
  patrones, pero puede que no tengan sentido.
- Ante la presencia de mas datos, encontrar un
  patrón se hace mas difícil; encontrar un
  patrón en ese caso, es mas probable que
  tenga una explicación lógica.


- [2022-06-17 Fri 09:34]
  - Auto-Correlación:
    - La variable tiempo puede no estar explícita,
      pero si explícita.

*** Pasos para un modelo bien construido
1) Calidad del dato
2) Construcción del modelo
3) Análisis de supuestos
4) Evaluar R (coeficientes)
   : pearson
     - todas continuas
   : spearman
     - una discreta u ordinal
       - (generalmente la independiente)
   : \Tau de Kendall
     - dos discretas u ordinales
   : V de Cramer
     - ordinales
   : \Chi -cuadrado
     - nominal
   - R
   - R^2
   - R^2_{ajustado}
5) Evaluar modelo
6) Evaluar parámetros


- \beta_i =0 \iff significa que se debe construir
  un nuevo modelo.

*** Cantidad de estrellas y significancia
- 1: \alpha < 0.001
- 2: \alpha < 0.01
- 3: \alpha < 0.05
- 0: \alpha < 1


- Mientras más estrellas, "más menor" que \alpha.


: Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

*** Que tipo de variable?
- La escala de medida determina el tipo de variable.
  - "Rojo".
    - Puede ser un color, estado de animo, nota,
      o cualquier cosa.
    - La unidad de medida determina a que nos
      estamos refiriendo.
*** Anova
*** R^2
- ¿Qué porcentaje de X puede explicar la varianza de Y.
- O qué porcentaje de la varianza de Y puede
  ser explicado por X.
*** R^2_{aj}
- Si R^2 > R^2_{aj}
  - Si no puedes aumentar el tamano de la muestra,
    entonces trabaja con el ajustado.
*** Que es el residual?
\(u = Y - \cap Y\)

** [2022-06-22 Wed]
- Qué significa B0 igual a 0?
  - Que hay que hacer otro modelo ajustado.


- [2022-06-22 Wed 12:00]
  - "Si el S de la media de los errores no se cumple
    y el supuesto de normalidad tampoco,
    entonces olvídate del modelo".
* Local variables :noexport:
# Local Variables:
# ispell-local-dictionary: "espanol"
# End:

#  LocalWords:  curtosis Cedasticidad
